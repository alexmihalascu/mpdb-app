{"ast":null,"code":"'use strict';\n\nconst log = require('npmlog');\nconst execFile = require('child_process').execFile;\nconst path = require('path');\nfunction logWithPrefix(log, prefix) {\n  function setPrefix(logFunction) {\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return logFunction.apply(null, [prefix, ...args]);\n    }; // eslint-disable-line\n  }\n\n  return {\n    silly: setPrefix(log.silly),\n    verbose: setPrefix(log.verbose),\n    info: setPrefix(log.info),\n    warn: setPrefix(log.warn),\n    error: setPrefix(log.error)\n  };\n}\nfunction regGetValue(key, value, addOpts, cb) {\n  const outReValue = value.replace(/\\W/g, '.');\n  const outRe = new RegExp(`^\\\\s+${outReValue}\\\\s+REG_\\\\w+\\\\s+(\\\\S.*)$`, 'im');\n  const reg = path.join(process.env.SystemRoot, 'System32', 'reg.exe');\n  const regArgs = ['query', key, '/v', value].concat(addOpts);\n  log.silly('reg', 'running', reg, regArgs);\n  const child = execFile(reg, regArgs, {\n    encoding: 'utf8'\n  }, function (err, stdout, stderr) {\n    log.silly('reg', 'reg.exe stdout = %j', stdout);\n    if (err || stderr.trim() !== '') {\n      log.silly('reg', 'reg.exe err = %j', err && (err.stack || err));\n      log.silly('reg', 'reg.exe stderr = %j', stderr);\n      return cb(err, stderr);\n    }\n    const result = outRe.exec(stdout);\n    if (!result) {\n      log.silly('reg', 'error parsing stdout');\n      return cb(new Error('Could not parse output of reg.exe'));\n    }\n    log.silly('reg', 'found: %j', result[1]);\n    cb(null, result[1]);\n  });\n  child.stdin.end();\n}\nfunction regSearchKeys(keys, value, addOpts, cb) {\n  var i = 0;\n  const search = () => {\n    log.silly('reg-search', 'looking for %j in %j', value, keys[i]);\n    regGetValue(keys[i], value, addOpts, (err, res) => {\n      ++i;\n      if (err && i < keys.length) {\n        return search();\n      }\n      cb(err, res);\n    });\n  };\n  search();\n}\nmodule.exports = {\n  logWithPrefix: logWithPrefix,\n  regGetValue: regGetValue,\n  regSearchKeys: regSearchKeys\n};","map":{"version":3,"names":["log","require","execFile","path","logWithPrefix","prefix","setPrefix","logFunction","args","apply","silly","verbose","info","warn","error","regGetValue","key","value","addOpts","cb","outReValue","replace","outRe","RegExp","reg","join","process","env","SystemRoot","regArgs","concat","child","encoding","err","stdout","stderr","trim","stack","result","exec","Error","stdin","end","regSearchKeys","keys","i","search","res","length","module","exports"],"sources":["/Users/alexmihalascu/Desktop/mpdb-app/node_modules/node-gyp/lib/util.js"],"sourcesContent":["'use strict'\n\nconst log = require('npmlog')\nconst execFile = require('child_process').execFile\nconst path = require('path')\n\nfunction logWithPrefix (log, prefix) {\n  function setPrefix (logFunction) {\n    return (...args) => logFunction.apply(null, [ prefix, ...args ]) // eslint-disable-line\n  }\n  return {\n    silly: setPrefix(log.silly),\n    verbose: setPrefix(log.verbose),\n    info: setPrefix(log.info),\n    warn: setPrefix(log.warn),\n    error: setPrefix(log.error)\n  }\n}\n\nfunction regGetValue (key, value, addOpts, cb) {\n  const outReValue = value.replace(/\\W/g, '.')\n  const outRe = new RegExp(`^\\\\s+${outReValue}\\\\s+REG_\\\\w+\\\\s+(\\\\S.*)$`, 'im')\n  const reg = path.join(process.env.SystemRoot, 'System32', 'reg.exe')\n  const regArgs = ['query', key, '/v', value].concat(addOpts)\n\n  log.silly('reg', 'running', reg, regArgs)\n  const child = execFile(reg, regArgs, { encoding: 'utf8' },\n    function (err, stdout, stderr) {\n      log.silly('reg', 'reg.exe stdout = %j', stdout)\n      if (err || stderr.trim() !== '') {\n        log.silly('reg', 'reg.exe err = %j', err && (err.stack || err))\n        log.silly('reg', 'reg.exe stderr = %j', stderr)\n        return cb(err, stderr)\n      }\n\n      const result = outRe.exec(stdout)\n      if (!result) {\n        log.silly('reg', 'error parsing stdout')\n        return cb(new Error('Could not parse output of reg.exe'))\n      }\n      log.silly('reg', 'found: %j', result[1])\n      cb(null, result[1])\n    })\n  child.stdin.end()\n}\n\nfunction regSearchKeys (keys, value, addOpts, cb) {\n  var i = 0\n  const search = () => {\n    log.silly('reg-search', 'looking for %j in %j', value, keys[i])\n    regGetValue(keys[i], value, addOpts, (err, res) => {\n      ++i\n      if (err && i < keys.length) { return search() }\n      cb(err, res)\n    })\n  }\n  search()\n}\n\nmodule.exports = {\n  logWithPrefix: logWithPrefix,\n  regGetValue: regGetValue,\n  regSearchKeys: regSearchKeys\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}