{"ast":null,"code":"'use strict';\n\nconst log = require('npmlog');\nconst execFile = require('child_process').execFile;\nconst fs = require('fs');\nconst path = require('path').win32;\nconst logWithPrefix = require('./util').logWithPrefix;\nconst regSearchKeys = require('./util').regSearchKeys;\nfunction findVisualStudio(nodeSemver, configMsvsVersion, callback) {\n  const finder = new VisualStudioFinder(nodeSemver, configMsvsVersion, callback);\n  finder.findVisualStudio();\n}\nfunction VisualStudioFinder(nodeSemver, configMsvsVersion, callback) {\n  this.nodeSemver = nodeSemver;\n  this.configMsvsVersion = configMsvsVersion;\n  this.callback = callback;\n  this.errorLog = [];\n  this.validVersions = [];\n}\nVisualStudioFinder.prototype = {\n  log: logWithPrefix(log, 'find VS'),\n  regSearchKeys: regSearchKeys,\n  // Logs a message at verbose level, but also saves it to be displayed later\n  // at error level if an error occurs. This should help diagnose the problem.\n  addLog: function addLog(message) {\n    this.log.verbose(message);\n    this.errorLog.push(message);\n  },\n  findVisualStudio: function findVisualStudio() {\n    this.configVersionYear = null;\n    this.configPath = null;\n    if (this.configMsvsVersion) {\n      this.addLog('msvs_version was set from command line or npm config');\n      if (this.configMsvsVersion.match(/^\\d{4}$/)) {\n        this.configVersionYear = parseInt(this.configMsvsVersion, 10);\n        this.addLog(`- looking for Visual Studio version ${this.configVersionYear}`);\n      } else {\n        this.configPath = path.resolve(this.configMsvsVersion);\n        this.addLog(`- looking for Visual Studio installed in \"${this.configPath}\"`);\n      }\n    } else {\n      this.addLog('msvs_version not set from command line or npm config');\n    }\n    if (process.env.VCINSTALLDIR) {\n      this.envVcInstallDir = path.resolve(process.env.VCINSTALLDIR, '..');\n      this.addLog('running in VS Command Prompt, installation path is:\\n' + `\"${this.envVcInstallDir}\"\\n- will only use this version`);\n    } else {\n      this.addLog('VCINSTALLDIR not set, not running in VS Command Prompt');\n    }\n    this.findVisualStudio2017OrNewer(info => {\n      if (info) {\n        return this.succeed(info);\n      }\n      this.findVisualStudio2015(info => {\n        if (info) {\n          return this.succeed(info);\n        }\n        this.findVisualStudio2013(info => {\n          if (info) {\n            return this.succeed(info);\n          }\n          this.fail();\n        });\n      });\n    });\n  },\n  succeed: function succeed(info) {\n    this.log.info(`using VS${info.versionYear} (${info.version}) found at:` + `\\n\"${info.path}\"` + '\\nrun with --verbose for detailed information');\n    process.nextTick(this.callback.bind(null, null, info));\n  },\n  fail: function fail() {\n    if (this.configMsvsVersion && this.envVcInstallDir) {\n      this.errorLog.push('msvs_version does not match this VS Command Prompt or the', 'installation cannot be used.');\n    } else if (this.configMsvsVersion) {\n      // If msvs_version was specified but finding VS failed, print what would\n      // have been accepted\n      this.errorLog.push('');\n      if (this.validVersions) {\n        this.errorLog.push('valid versions for msvs_version:');\n        this.validVersions.forEach(version => {\n          this.errorLog.push(`- \"${version}\"`);\n        });\n      } else {\n        this.errorLog.push('no valid versions for msvs_version were found');\n      }\n    }\n    const errorLog = this.errorLog.join('\\n');\n\n    // For Windows 80 col console, use up to the column before the one marked\n    // with X (total 79 chars including logger prefix, 62 chars usable here):\n    //                                                               X\n    const infoLog = ['**************************************************************', 'You need to install the latest version of Visual Studio', 'including the \"Desktop development with C++\" workload.', 'For more information consult the documentation at:', 'https://github.com/nodejs/node-gyp#on-windows', '**************************************************************'].join('\\n');\n    this.log.error(`\\n${errorLog}\\n\\n${infoLog}\\n`);\n    process.nextTick(this.callback.bind(null, new Error('Could not find any Visual Studio installation to use')));\n  },\n  // Invoke the PowerShell script to get information about Visual Studio 2017\n  // or newer installations\n  findVisualStudio2017OrNewer: function findVisualStudio2017OrNewer(cb) {\n    var ps = path.join(process.env.SystemRoot, 'System32', 'WindowsPowerShell', 'v1.0', 'powershell.exe');\n    var csFile = path.join(__dirname, 'Find-VisualStudio.cs');\n    var psArgs = ['-ExecutionPolicy', 'Unrestricted', '-NoProfile', '-Command', '&{Add-Type -Path \\'' + csFile + '\\';' + '[VisualStudioConfiguration.Main]::PrintJson()}'];\n    this.log.silly('Running', ps, psArgs);\n    var child = execFile(ps, psArgs, {\n      encoding: 'utf8'\n    }, (err, stdout, stderr) => {\n      this.parseData(err, stdout, stderr, cb);\n    });\n    child.stdin.end();\n  },\n  // Parse the output of the PowerShell script and look for an installation\n  // of Visual Studio 2017 or newer to use\n  parseData: function parseData(err, stdout, stderr, cb) {\n    this.log.silly('PS stderr = %j', stderr);\n    const failPowershell = () => {\n      this.addLog('could not use PowerShell to find Visual Studio 2017 or newer, try re-running with \\'--loglevel silly\\' for more details');\n      cb(null);\n    };\n    if (err) {\n      this.log.silly('PS err = %j', err && (err.stack || err));\n      return failPowershell();\n    }\n    var vsInfo;\n    try {\n      vsInfo = JSON.parse(stdout);\n    } catch (e) {\n      this.log.silly('PS stdout = %j', stdout);\n      this.log.silly(e);\n      return failPowershell();\n    }\n    if (!Array.isArray(vsInfo)) {\n      this.log.silly('PS stdout = %j', stdout);\n      return failPowershell();\n    }\n    vsInfo = vsInfo.map(info => {\n      this.log.silly(`processing installation: \"${info.path}\"`);\n      info.path = path.resolve(info.path);\n      var ret = this.getVersionInfo(info);\n      ret.path = info.path;\n      ret.msBuild = this.getMSBuild(info, ret.versionYear);\n      ret.toolset = this.getToolset(info, ret.versionYear);\n      ret.sdk = this.getSDK(info);\n      return ret;\n    });\n    this.log.silly('vsInfo:', vsInfo);\n\n    // Remove future versions or errors parsing version number\n    vsInfo = vsInfo.filter(info => {\n      if (info.versionYear) {\n        return true;\n      }\n      this.addLog(`unknown version \"${info.version}\" found at \"${info.path}\"`);\n      return false;\n    });\n\n    // Sort to place newer versions first\n    vsInfo.sort((a, b) => b.versionYear - a.versionYear);\n    for (var i = 0; i < vsInfo.length; ++i) {\n      const info = vsInfo[i];\n      this.addLog(`checking VS${info.versionYear} (${info.version}) found ` + `at:\\n\"${info.path}\"`);\n      if (info.msBuild) {\n        this.addLog('- found \"Visual Studio C++ core features\"');\n      } else {\n        this.addLog('- \"Visual Studio C++ core features\" missing');\n        continue;\n      }\n      if (info.toolset) {\n        this.addLog(`- found VC++ toolset: ${info.toolset}`);\n      } else {\n        this.addLog('- missing any VC++ toolset');\n        continue;\n      }\n      if (info.sdk) {\n        this.addLog(`- found Windows SDK: ${info.sdk}`);\n      } else {\n        this.addLog('- missing any Windows SDK');\n        continue;\n      }\n      if (!this.checkConfigVersion(info.versionYear, info.path)) {\n        continue;\n      }\n      return cb(info);\n    }\n    this.addLog('could not find a version of Visual Studio 2017 or newer to use');\n    cb(null);\n  },\n  // Helper - process version information\n  getVersionInfo: function getVersionInfo(info) {\n    const match = /^(\\d+)\\.(\\d+)\\..*/.exec(info.version);\n    if (!match) {\n      this.log.silly('- failed to parse version:', info.version);\n      return {};\n    }\n    this.log.silly('- version match = %j', match);\n    var ret = {\n      version: info.version,\n      versionMajor: parseInt(match[1], 10),\n      versionMinor: parseInt(match[2], 10)\n    };\n    if (ret.versionMajor === 15) {\n      ret.versionYear = 2017;\n      return ret;\n    }\n    if (ret.versionMajor === 16) {\n      ret.versionYear = 2019;\n      return ret;\n    }\n    if (ret.versionMajor === 17) {\n      ret.versionYear = 2022;\n      return ret;\n    }\n    this.log.silly('- unsupported version:', ret.versionMajor);\n    return {};\n  },\n  // Helper - process MSBuild information\n  getMSBuild: function getMSBuild(info, versionYear) {\n    const pkg = 'Microsoft.VisualStudio.VC.MSBuild.Base';\n    const msbuildPath = path.join(info.path, 'MSBuild', 'Current', 'Bin', 'MSBuild.exe');\n    if (info.packages.indexOf(pkg) !== -1) {\n      this.log.silly('- found VC.MSBuild.Base');\n      if (versionYear === 2017) {\n        return path.join(info.path, 'MSBuild', '15.0', 'Bin', 'MSBuild.exe');\n      }\n      if (versionYear === 2019) {\n        return msbuildPath;\n      }\n    }\n    // visual studio 2022 don't has msbuild pkg\n    if (fs.existsSync(msbuildPath)) {\n      return msbuildPath;\n    }\n    return null;\n  },\n  // Helper - process toolset information\n  getToolset: function getToolset(info, versionYear) {\n    const pkg = 'Microsoft.VisualStudio.Component.VC.Tools.x86.x64';\n    const express = 'Microsoft.VisualStudio.WDExpress';\n    if (info.packages.indexOf(pkg) !== -1) {\n      this.log.silly('- found VC.Tools.x86.x64');\n    } else if (info.packages.indexOf(express) !== -1) {\n      this.log.silly('- found Visual Studio Express (looking for toolset)');\n    } else {\n      return null;\n    }\n    if (versionYear === 2017) {\n      return 'v141';\n    } else if (versionYear === 2019) {\n      return 'v142';\n    } else if (versionYear === 2022) {\n      return 'v143';\n    }\n    this.log.silly('- invalid versionYear:', versionYear);\n    return null;\n  },\n  // Helper - process Windows SDK information\n  getSDK: function getSDK(info) {\n    const win8SDK = 'Microsoft.VisualStudio.Component.Windows81SDK';\n    const win10SDKPrefix = 'Microsoft.VisualStudio.Component.Windows10SDK.';\n    var Win10SDKVer = 0;\n    info.packages.forEach(pkg => {\n      if (!pkg.startsWith(win10SDKPrefix)) {\n        return;\n      }\n      const parts = pkg.split('.');\n      if (parts.length > 5 && parts[5] !== 'Desktop') {\n        this.log.silly('- ignoring non-Desktop Win10SDK:', pkg);\n        return;\n      }\n      const foundSdkVer = parseInt(parts[4], 10);\n      if (isNaN(foundSdkVer)) {\n        // Microsoft.VisualStudio.Component.Windows10SDK.IpOverUsb\n        this.log.silly('- failed to parse Win10SDK number:', pkg);\n        return;\n      }\n      this.log.silly('- found Win10SDK:', foundSdkVer);\n      Win10SDKVer = Math.max(Win10SDKVer, foundSdkVer);\n    });\n    if (Win10SDKVer !== 0) {\n      return `10.0.${Win10SDKVer}.0`;\n    } else if (info.packages.indexOf(win8SDK) !== -1) {\n      this.log.silly('- found Win8SDK');\n      return '8.1';\n    }\n    return null;\n  },\n  // Find an installation of Visual Studio 2015 to use\n  findVisualStudio2015: function findVisualStudio2015(cb) {\n    return this.findOldVS({\n      version: '14.0',\n      versionMajor: 14,\n      versionMinor: 0,\n      versionYear: 2015,\n      toolset: 'v140'\n    }, cb);\n  },\n  // Find an installation of Visual Studio 2013 to use\n  findVisualStudio2013: function findVisualStudio2013(cb) {\n    if (this.nodeSemver.major >= 9) {\n      this.addLog('not looking for VS2013 as it is only supported up to Node.js 8');\n      return cb(null);\n    }\n    return this.findOldVS({\n      version: '12.0',\n      versionMajor: 12,\n      versionMinor: 0,\n      versionYear: 2013,\n      toolset: 'v120'\n    }, cb);\n  },\n  // Helper - common code for VS2013 and VS2015\n  findOldVS: function findOldVS(info, cb) {\n    const regVC7 = ['HKLM\\\\Software\\\\Microsoft\\\\VisualStudio\\\\SxS\\\\VC7', 'HKLM\\\\Software\\\\Wow6432Node\\\\Microsoft\\\\VisualStudio\\\\SxS\\\\VC7'];\n    const regMSBuild = 'HKLM\\\\Software\\\\Microsoft\\\\MSBuild\\\\ToolsVersions';\n    this.addLog(`looking for Visual Studio ${info.versionYear}`);\n    this.regSearchKeys(regVC7, info.version, [], (err, res) => {\n      if (err) {\n        this.addLog('- not found');\n        return cb(null);\n      }\n      const vsPath = path.resolve(res, '..');\n      this.addLog(`- found in \"${vsPath}\"`);\n      const msBuildRegOpts = process.arch === 'ia32' ? [] : ['/reg:32'];\n      this.regSearchKeys([`${regMSBuild}\\\\${info.version}`], 'MSBuildToolsPath', msBuildRegOpts, (err, res) => {\n        if (err) {\n          this.addLog('- could not find MSBuild in registry for this version');\n          return cb(null);\n        }\n        const msBuild = path.join(res, 'MSBuild.exe');\n        this.addLog(`- MSBuild in \"${msBuild}\"`);\n        if (!this.checkConfigVersion(info.versionYear, vsPath)) {\n          return cb(null);\n        }\n        info.path = vsPath;\n        info.msBuild = msBuild;\n        info.sdk = null;\n        cb(info);\n      });\n    });\n  },\n  // After finding a usable version of Visual Studio:\n  // - add it to validVersions to be displayed at the end if a specific\n  //   version was requested and not found;\n  // - check if this is the version that was requested.\n  // - check if this matches the Visual Studio Command Prompt\n  checkConfigVersion: function checkConfigVersion(versionYear, vsPath) {\n    this.validVersions.push(versionYear);\n    this.validVersions.push(vsPath);\n    if (this.configVersionYear && this.configVersionYear !== versionYear) {\n      this.addLog('- msvs_version does not match this version');\n      return false;\n    }\n    if (this.configPath && path.relative(this.configPath, vsPath) !== '') {\n      this.addLog('- msvs_version does not point to this installation');\n      return false;\n    }\n    if (this.envVcInstallDir && path.relative(this.envVcInstallDir, vsPath) !== '') {\n      this.addLog('- does not match this Visual Studio Command Prompt');\n      return false;\n    }\n    return true;\n  }\n};\nmodule.exports = findVisualStudio;\nmodule.exports.test = {\n  VisualStudioFinder: VisualStudioFinder,\n  findVisualStudio: findVisualStudio\n};","map":{"version":3,"names":["log","require","execFile","fs","path","win32","logWithPrefix","regSearchKeys","findVisualStudio","nodeSemver","configMsvsVersion","callback","finder","VisualStudioFinder","errorLog","validVersions","prototype","addLog","message","verbose","push","configVersionYear","configPath","match","parseInt","resolve","process","env","VCINSTALLDIR","envVcInstallDir","findVisualStudio2017OrNewer","info","succeed","findVisualStudio2015","findVisualStudio2013","fail","versionYear","version","nextTick","bind","forEach","join","infoLog","error","Error","cb","ps","SystemRoot","csFile","__dirname","psArgs","silly","child","encoding","err","stdout","stderr","parseData","stdin","end","failPowershell","stack","vsInfo","JSON","parse","e","Array","isArray","map","ret","getVersionInfo","msBuild","getMSBuild","toolset","getToolset","sdk","getSDK","filter","sort","a","b","i","length","checkConfigVersion","exec","versionMajor","versionMinor","pkg","msbuildPath","packages","indexOf","existsSync","express","win8SDK","win10SDKPrefix","Win10SDKVer","startsWith","parts","split","foundSdkVer","isNaN","Math","max","findOldVS","major","regVC7","regMSBuild","res","vsPath","msBuildRegOpts","arch","relative","module","exports","test"],"sources":["/Users/alexmihalascu/Desktop/mpdb-app/node_modules/node-gyp/lib/find-visualstudio.js"],"sourcesContent":["'use strict'\n\nconst log = require('npmlog')\nconst execFile = require('child_process').execFile\nconst fs = require('fs')\nconst path = require('path').win32\nconst logWithPrefix = require('./util').logWithPrefix\nconst regSearchKeys = require('./util').regSearchKeys\n\nfunction findVisualStudio (nodeSemver, configMsvsVersion, callback) {\n  const finder = new VisualStudioFinder(nodeSemver, configMsvsVersion,\n    callback)\n  finder.findVisualStudio()\n}\n\nfunction VisualStudioFinder (nodeSemver, configMsvsVersion, callback) {\n  this.nodeSemver = nodeSemver\n  this.configMsvsVersion = configMsvsVersion\n  this.callback = callback\n  this.errorLog = []\n  this.validVersions = []\n}\n\nVisualStudioFinder.prototype = {\n  log: logWithPrefix(log, 'find VS'),\n\n  regSearchKeys: regSearchKeys,\n\n  // Logs a message at verbose level, but also saves it to be displayed later\n  // at error level if an error occurs. This should help diagnose the problem.\n  addLog: function addLog (message) {\n    this.log.verbose(message)\n    this.errorLog.push(message)\n  },\n\n  findVisualStudio: function findVisualStudio () {\n    this.configVersionYear = null\n    this.configPath = null\n    if (this.configMsvsVersion) {\n      this.addLog('msvs_version was set from command line or npm config')\n      if (this.configMsvsVersion.match(/^\\d{4}$/)) {\n        this.configVersionYear = parseInt(this.configMsvsVersion, 10)\n        this.addLog(\n          `- looking for Visual Studio version ${this.configVersionYear}`)\n      } else {\n        this.configPath = path.resolve(this.configMsvsVersion)\n        this.addLog(\n          `- looking for Visual Studio installed in \"${this.configPath}\"`)\n      }\n    } else {\n      this.addLog('msvs_version not set from command line or npm config')\n    }\n\n    if (process.env.VCINSTALLDIR) {\n      this.envVcInstallDir =\n        path.resolve(process.env.VCINSTALLDIR, '..')\n      this.addLog('running in VS Command Prompt, installation path is:\\n' +\n        `\"${this.envVcInstallDir}\"\\n- will only use this version`)\n    } else {\n      this.addLog('VCINSTALLDIR not set, not running in VS Command Prompt')\n    }\n\n    this.findVisualStudio2017OrNewer((info) => {\n      if (info) {\n        return this.succeed(info)\n      }\n      this.findVisualStudio2015((info) => {\n        if (info) {\n          return this.succeed(info)\n        }\n        this.findVisualStudio2013((info) => {\n          if (info) {\n            return this.succeed(info)\n          }\n          this.fail()\n        })\n      })\n    })\n  },\n\n  succeed: function succeed (info) {\n    this.log.info(`using VS${info.versionYear} (${info.version}) found at:` +\n                  `\\n\"${info.path}\"` +\n                  '\\nrun with --verbose for detailed information')\n    process.nextTick(this.callback.bind(null, null, info))\n  },\n\n  fail: function fail () {\n    if (this.configMsvsVersion && this.envVcInstallDir) {\n      this.errorLog.push(\n        'msvs_version does not match this VS Command Prompt or the',\n        'installation cannot be used.')\n    } else if (this.configMsvsVersion) {\n      // If msvs_version was specified but finding VS failed, print what would\n      // have been accepted\n      this.errorLog.push('')\n      if (this.validVersions) {\n        this.errorLog.push('valid versions for msvs_version:')\n        this.validVersions.forEach((version) => {\n          this.errorLog.push(`- \"${version}\"`)\n        })\n      } else {\n        this.errorLog.push('no valid versions for msvs_version were found')\n      }\n    }\n\n    const errorLog = this.errorLog.join('\\n')\n\n    // For Windows 80 col console, use up to the column before the one marked\n    // with X (total 79 chars including logger prefix, 62 chars usable here):\n    //                                                               X\n    const infoLog = [\n      '**************************************************************',\n      'You need to install the latest version of Visual Studio',\n      'including the \"Desktop development with C++\" workload.',\n      'For more information consult the documentation at:',\n      'https://github.com/nodejs/node-gyp#on-windows',\n      '**************************************************************'\n    ].join('\\n')\n\n    this.log.error(`\\n${errorLog}\\n\\n${infoLog}\\n`)\n    process.nextTick(this.callback.bind(null, new Error(\n      'Could not find any Visual Studio installation to use')))\n  },\n\n  // Invoke the PowerShell script to get information about Visual Studio 2017\n  // or newer installations\n  findVisualStudio2017OrNewer: function findVisualStudio2017OrNewer (cb) {\n    var ps = path.join(process.env.SystemRoot, 'System32',\n      'WindowsPowerShell', 'v1.0', 'powershell.exe')\n    var csFile = path.join(__dirname, 'Find-VisualStudio.cs')\n    var psArgs = [\n      '-ExecutionPolicy',\n      'Unrestricted',\n      '-NoProfile',\n      '-Command',\n      '&{Add-Type -Path \\'' + csFile + '\\';' + '[VisualStudioConfiguration.Main]::PrintJson()}'\n    ]\n\n    this.log.silly('Running', ps, psArgs)\n    var child = execFile(ps, psArgs, { encoding: 'utf8' },\n      (err, stdout, stderr) => {\n        this.parseData(err, stdout, stderr, cb)\n      })\n    child.stdin.end()\n  },\n\n  // Parse the output of the PowerShell script and look for an installation\n  // of Visual Studio 2017 or newer to use\n  parseData: function parseData (err, stdout, stderr, cb) {\n    this.log.silly('PS stderr = %j', stderr)\n\n    const failPowershell = () => {\n      this.addLog(\n        'could not use PowerShell to find Visual Studio 2017 or newer, try re-running with \\'--loglevel silly\\' for more details')\n      cb(null)\n    }\n\n    if (err) {\n      this.log.silly('PS err = %j', err && (err.stack || err))\n      return failPowershell()\n    }\n\n    var vsInfo\n    try {\n      vsInfo = JSON.parse(stdout)\n    } catch (e) {\n      this.log.silly('PS stdout = %j', stdout)\n      this.log.silly(e)\n      return failPowershell()\n    }\n\n    if (!Array.isArray(vsInfo)) {\n      this.log.silly('PS stdout = %j', stdout)\n      return failPowershell()\n    }\n\n    vsInfo = vsInfo.map((info) => {\n      this.log.silly(`processing installation: \"${info.path}\"`)\n      info.path = path.resolve(info.path)\n      var ret = this.getVersionInfo(info)\n      ret.path = info.path\n      ret.msBuild = this.getMSBuild(info, ret.versionYear)\n      ret.toolset = this.getToolset(info, ret.versionYear)\n      ret.sdk = this.getSDK(info)\n      return ret\n    })\n    this.log.silly('vsInfo:', vsInfo)\n\n    // Remove future versions or errors parsing version number\n    vsInfo = vsInfo.filter((info) => {\n      if (info.versionYear) {\n        return true\n      }\n      this.addLog(`unknown version \"${info.version}\" found at \"${info.path}\"`)\n      return false\n    })\n\n    // Sort to place newer versions first\n    vsInfo.sort((a, b) => b.versionYear - a.versionYear)\n\n    for (var i = 0; i < vsInfo.length; ++i) {\n      const info = vsInfo[i]\n      this.addLog(`checking VS${info.versionYear} (${info.version}) found ` +\n                  `at:\\n\"${info.path}\"`)\n\n      if (info.msBuild) {\n        this.addLog('- found \"Visual Studio C++ core features\"')\n      } else {\n        this.addLog('- \"Visual Studio C++ core features\" missing')\n        continue\n      }\n\n      if (info.toolset) {\n        this.addLog(`- found VC++ toolset: ${info.toolset}`)\n      } else {\n        this.addLog('- missing any VC++ toolset')\n        continue\n      }\n\n      if (info.sdk) {\n        this.addLog(`- found Windows SDK: ${info.sdk}`)\n      } else {\n        this.addLog('- missing any Windows SDK')\n        continue\n      }\n\n      if (!this.checkConfigVersion(info.versionYear, info.path)) {\n        continue\n      }\n\n      return cb(info)\n    }\n\n    this.addLog(\n      'could not find a version of Visual Studio 2017 or newer to use')\n    cb(null)\n  },\n\n  // Helper - process version information\n  getVersionInfo: function getVersionInfo (info) {\n    const match = /^(\\d+)\\.(\\d+)\\..*/.exec(info.version)\n    if (!match) {\n      this.log.silly('- failed to parse version:', info.version)\n      return {}\n    }\n    this.log.silly('- version match = %j', match)\n    var ret = {\n      version: info.version,\n      versionMajor: parseInt(match[1], 10),\n      versionMinor: parseInt(match[2], 10)\n    }\n    if (ret.versionMajor === 15) {\n      ret.versionYear = 2017\n      return ret\n    }\n    if (ret.versionMajor === 16) {\n      ret.versionYear = 2019\n      return ret\n    }\n    if (ret.versionMajor === 17) {\n      ret.versionYear = 2022\n      return ret\n    }\n    this.log.silly('- unsupported version:', ret.versionMajor)\n    return {}\n  },\n\n  // Helper - process MSBuild information\n  getMSBuild: function getMSBuild (info, versionYear) {\n    const pkg = 'Microsoft.VisualStudio.VC.MSBuild.Base'\n    const msbuildPath = path.join(info.path, 'MSBuild', 'Current', 'Bin', 'MSBuild.exe')\n    if (info.packages.indexOf(pkg) !== -1) {\n      this.log.silly('- found VC.MSBuild.Base')\n      if (versionYear === 2017) {\n        return path.join(info.path, 'MSBuild', '15.0', 'Bin', 'MSBuild.exe')\n      }\n      if (versionYear === 2019) {\n        return msbuildPath\n      }\n    }\n    // visual studio 2022 don't has msbuild pkg\n    if (fs.existsSync(msbuildPath)) {\n      return msbuildPath\n    }\n    return null\n  },\n\n  // Helper - process toolset information\n  getToolset: function getToolset (info, versionYear) {\n    const pkg = 'Microsoft.VisualStudio.Component.VC.Tools.x86.x64'\n    const express = 'Microsoft.VisualStudio.WDExpress'\n\n    if (info.packages.indexOf(pkg) !== -1) {\n      this.log.silly('- found VC.Tools.x86.x64')\n    } else if (info.packages.indexOf(express) !== -1) {\n      this.log.silly('- found Visual Studio Express (looking for toolset)')\n    } else {\n      return null\n    }\n\n    if (versionYear === 2017) {\n      return 'v141'\n    } else if (versionYear === 2019) {\n      return 'v142'\n    } else if (versionYear === 2022) {\n      return 'v143'\n    }\n    this.log.silly('- invalid versionYear:', versionYear)\n    return null\n  },\n\n  // Helper - process Windows SDK information\n  getSDK: function getSDK (info) {\n    const win8SDK = 'Microsoft.VisualStudio.Component.Windows81SDK'\n    const win10SDKPrefix = 'Microsoft.VisualStudio.Component.Windows10SDK.'\n\n    var Win10SDKVer = 0\n    info.packages.forEach((pkg) => {\n      if (!pkg.startsWith(win10SDKPrefix)) {\n        return\n      }\n      const parts = pkg.split('.')\n      if (parts.length > 5 && parts[5] !== 'Desktop') {\n        this.log.silly('- ignoring non-Desktop Win10SDK:', pkg)\n        return\n      }\n      const foundSdkVer = parseInt(parts[4], 10)\n      if (isNaN(foundSdkVer)) {\n        // Microsoft.VisualStudio.Component.Windows10SDK.IpOverUsb\n        this.log.silly('- failed to parse Win10SDK number:', pkg)\n        return\n      }\n      this.log.silly('- found Win10SDK:', foundSdkVer)\n      Win10SDKVer = Math.max(Win10SDKVer, foundSdkVer)\n    })\n\n    if (Win10SDKVer !== 0) {\n      return `10.0.${Win10SDKVer}.0`\n    } else if (info.packages.indexOf(win8SDK) !== -1) {\n      this.log.silly('- found Win8SDK')\n      return '8.1'\n    }\n    return null\n  },\n\n  // Find an installation of Visual Studio 2015 to use\n  findVisualStudio2015: function findVisualStudio2015 (cb) {\n    return this.findOldVS({\n      version: '14.0',\n      versionMajor: 14,\n      versionMinor: 0,\n      versionYear: 2015,\n      toolset: 'v140'\n    }, cb)\n  },\n\n  // Find an installation of Visual Studio 2013 to use\n  findVisualStudio2013: function findVisualStudio2013 (cb) {\n    if (this.nodeSemver.major >= 9) {\n      this.addLog(\n        'not looking for VS2013 as it is only supported up to Node.js 8')\n      return cb(null)\n    }\n    return this.findOldVS({\n      version: '12.0',\n      versionMajor: 12,\n      versionMinor: 0,\n      versionYear: 2013,\n      toolset: 'v120'\n    }, cb)\n  },\n\n  // Helper - common code for VS2013 and VS2015\n  findOldVS: function findOldVS (info, cb) {\n    const regVC7 = ['HKLM\\\\Software\\\\Microsoft\\\\VisualStudio\\\\SxS\\\\VC7',\n      'HKLM\\\\Software\\\\Wow6432Node\\\\Microsoft\\\\VisualStudio\\\\SxS\\\\VC7']\n    const regMSBuild = 'HKLM\\\\Software\\\\Microsoft\\\\MSBuild\\\\ToolsVersions'\n\n    this.addLog(`looking for Visual Studio ${info.versionYear}`)\n    this.regSearchKeys(regVC7, info.version, [], (err, res) => {\n      if (err) {\n        this.addLog('- not found')\n        return cb(null)\n      }\n\n      const vsPath = path.resolve(res, '..')\n      this.addLog(`- found in \"${vsPath}\"`)\n\n      const msBuildRegOpts = process.arch === 'ia32' ? [] : ['/reg:32']\n      this.regSearchKeys([`${regMSBuild}\\\\${info.version}`],\n        'MSBuildToolsPath', msBuildRegOpts, (err, res) => {\n          if (err) {\n            this.addLog(\n              '- could not find MSBuild in registry for this version')\n            return cb(null)\n          }\n\n          const msBuild = path.join(res, 'MSBuild.exe')\n          this.addLog(`- MSBuild in \"${msBuild}\"`)\n\n          if (!this.checkConfigVersion(info.versionYear, vsPath)) {\n            return cb(null)\n          }\n\n          info.path = vsPath\n          info.msBuild = msBuild\n          info.sdk = null\n          cb(info)\n        })\n    })\n  },\n\n  // After finding a usable version of Visual Studio:\n  // - add it to validVersions to be displayed at the end if a specific\n  //   version was requested and not found;\n  // - check if this is the version that was requested.\n  // - check if this matches the Visual Studio Command Prompt\n  checkConfigVersion: function checkConfigVersion (versionYear, vsPath) {\n    this.validVersions.push(versionYear)\n    this.validVersions.push(vsPath)\n\n    if (this.configVersionYear && this.configVersionYear !== versionYear) {\n      this.addLog('- msvs_version does not match this version')\n      return false\n    }\n    if (this.configPath &&\n        path.relative(this.configPath, vsPath) !== '') {\n      this.addLog('- msvs_version does not point to this installation')\n      return false\n    }\n    if (this.envVcInstallDir &&\n        path.relative(this.envVcInstallDir, vsPath) !== '') {\n      this.addLog('- does not match this Visual Studio Command Prompt')\n      return false\n    }\n\n    return true\n  }\n}\n\nmodule.exports = findVisualStudio\nmodule.exports.test = {\n  VisualStudioFinder: VisualStudioFinder,\n  findVisualStudio: findVisualStudio\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}