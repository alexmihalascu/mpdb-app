{"ast":null,"code":"// Inspired by https://github.com/tlrobinson/long-stack-traces\nconst util = require('util');\nfunction extendTrace(object, property, pos) {\n  const old = object[property];\n  object[property] = function () {\n    const error = new Error();\n    const name = object.constructor.name + '#' + property + '(' + Array.prototype.slice.call(arguments).map(function (el) {\n      return util.inspect(el, false, 0);\n    }).join(', ') + ')';\n    if (typeof pos === 'undefined') pos = -1;\n    if (pos < 0) pos += arguments.length;\n    const cb = arguments[pos];\n    if (typeof arguments[pos] === 'function') {\n      arguments[pos] = function replacement() {\n        const err = arguments[0];\n        if (err && err.stack && !err.__augmented) {\n          err.stack = filter(err).join('\\n');\n          err.stack += '\\n--> in ' + name;\n          err.stack += '\\n' + filter(error).slice(1).join('\\n');\n          err.__augmented = true;\n        }\n        return cb.apply(this, arguments);\n      };\n    }\n    return old.apply(this, arguments);\n  };\n}\nexports.extendTrace = extendTrace;\nfunction filter(error) {\n  return error.stack.split('\\n').filter(function (line) {\n    return line.indexOf(__filename) < 0;\n  });\n}","map":{"version":3,"names":["util","require","extendTrace","object","property","pos","old","error","Error","name","constructor","Array","prototype","slice","call","arguments","map","el","inspect","join","length","cb","replacement","err","stack","__augmented","filter","apply","exports","split","line","indexOf","__filename"],"sources":["/Users/alexmihalascu/Desktop/mpdb-app/node_modules/sqlite3/lib/trace.js"],"sourcesContent":["// Inspired by https://github.com/tlrobinson/long-stack-traces\nconst util = require('util');\n\nfunction extendTrace(object, property, pos) {\n    const old = object[property];\n    object[property] = function() {\n        const error = new Error();\n        const name = object.constructor.name + '#' + property + '(' +\n            Array.prototype.slice.call(arguments).map(function(el) {\n                return util.inspect(el, false, 0);\n            }).join(', ') + ')';\n\n        if (typeof pos === 'undefined') pos = -1;\n        if (pos < 0) pos += arguments.length;\n        const cb = arguments[pos];\n        if (typeof arguments[pos] === 'function') {\n            arguments[pos] = function replacement() {\n                const err = arguments[0];\n                if (err && err.stack && !err.__augmented) {\n                    err.stack = filter(err).join('\\n');\n                    err.stack += '\\n--> in ' + name;\n                    err.stack += '\\n' + filter(error).slice(1).join('\\n');\n                    err.__augmented = true;\n                }\n                return cb.apply(this, arguments);\n            };\n        }\n        return old.apply(this, arguments);\n    };\n}\nexports.extendTrace = extendTrace;\n\n\nfunction filter(error) {\n    return error.stack.split('\\n').filter(function(line) {\n        return line.indexOf(__filename) < 0;\n    });\n}\n"],"mappings":"AAAA;AACA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAE5B,SAASC,WAAW,CAACC,MAAM,EAAEC,QAAQ,EAAEC,GAAG,EAAE;EACxC,MAAMC,GAAG,GAAGH,MAAM,CAACC,QAAQ,CAAC;EAC5BD,MAAM,CAACC,QAAQ,CAAC,GAAG,YAAW;IAC1B,MAAMG,KAAK,GAAG,IAAIC,KAAK,EAAE;IACzB,MAAMC,IAAI,GAAGN,MAAM,CAACO,WAAW,CAACD,IAAI,GAAG,GAAG,GAAGL,QAAQ,GAAG,GAAG,GACvDO,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACC,SAAS,CAAC,CAACC,GAAG,CAAC,UAASC,EAAE,EAAE;MACnD,OAAOjB,IAAI,CAACkB,OAAO,CAACD,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC;IACrC,CAAC,CAAC,CAACE,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG;IAEvB,IAAI,OAAOd,GAAG,KAAK,WAAW,EAAEA,GAAG,GAAG,CAAC,CAAC;IACxC,IAAIA,GAAG,GAAG,CAAC,EAAEA,GAAG,IAAIU,SAAS,CAACK,MAAM;IACpC,MAAMC,EAAE,GAAGN,SAAS,CAACV,GAAG,CAAC;IACzB,IAAI,OAAOU,SAAS,CAACV,GAAG,CAAC,KAAK,UAAU,EAAE;MACtCU,SAAS,CAACV,GAAG,CAAC,GAAG,SAASiB,WAAW,GAAG;QACpC,MAAMC,GAAG,GAAGR,SAAS,CAAC,CAAC,CAAC;QACxB,IAAIQ,GAAG,IAAIA,GAAG,CAACC,KAAK,IAAI,CAACD,GAAG,CAACE,WAAW,EAAE;UACtCF,GAAG,CAACC,KAAK,GAAGE,MAAM,CAACH,GAAG,CAAC,CAACJ,IAAI,CAAC,IAAI,CAAC;UAClCI,GAAG,CAACC,KAAK,IAAI,WAAW,GAAGf,IAAI;UAC/Bc,GAAG,CAACC,KAAK,IAAI,IAAI,GAAGE,MAAM,CAACnB,KAAK,CAAC,CAACM,KAAK,CAAC,CAAC,CAAC,CAACM,IAAI,CAAC,IAAI,CAAC;UACrDI,GAAG,CAACE,WAAW,GAAG,IAAI;QAC1B;QACA,OAAOJ,EAAE,CAACM,KAAK,CAAC,IAAI,EAAEZ,SAAS,CAAC;MACpC,CAAC;IACL;IACA,OAAOT,GAAG,CAACqB,KAAK,CAAC,IAAI,EAAEZ,SAAS,CAAC;EACrC,CAAC;AACL;AACAa,OAAO,CAAC1B,WAAW,GAAGA,WAAW;AAGjC,SAASwB,MAAM,CAACnB,KAAK,EAAE;EACnB,OAAOA,KAAK,CAACiB,KAAK,CAACK,KAAK,CAAC,IAAI,CAAC,CAACH,MAAM,CAAC,UAASI,IAAI,EAAE;IACjD,OAAOA,IAAI,CAACC,OAAO,CAACC,UAAU,CAAC,GAAG,CAAC;EACvC,CAAC,CAAC;AACN"},"metadata":{},"sourceType":"script","externalDependencies":[]}